{"ast":null,"code":"import _toConsumableArray from \"C:/Users/joesh/IdeaProjects/soundtracks_final/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"C:/Users/joesh/IdeaProjects/soundtracks_final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/joesh/IdeaProjects/soundtracks_final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// Information to reach API\nvar API_URL_COMPLETIONS = \"https://api.openai.com/v1/completions\";\nvar API_URL_CHAT_COMPLETIONS = \"https://api.openai.com/v1/chat/completions\";\nvar api_key = process.env.REACT_APP_MY_OPENAI_API_KEY; //API key that Joe got from registering the app\nvar API_URL_IMAGE = \"https://api.openai.com/v1/images/generations\";\n\n// Fisher-Yates shuffle algorithm\nvar shuffleArray = function shuffleArray(array) {\n  for (var i = array.length - 1; i > 0; i--) {\n    var j = Math.floor(Math.random() * (i + 1));\n    var _ref = [array[j], array[i]];\n    array[i] = _ref[0];\n    array[j] = _ref[1];\n  }\n};\n\n// creates song recommendations based on a prompt\nexport var generateTotalSongRecommendations = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(prompt) {\n    var strategies, totalRecommendations, recsPerStrategy, strategyPromises, recommendations, remainingRecs, additionalRecs;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return DetermineAppropriateStrategies(prompt);\n        case 2:\n          strategies = _context2.sent;\n          // Total recommendations required\n          totalRecommendations = 25; // Calculate recommendations per strategy\n          recsPerStrategy = Math.floor(totalRecommendations / strategies.length); // Create array of promises for all strategies\n          strategyPromises = strategies.map( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(strategy) {\n              var strategyPrompt, strategyRecommendations;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    // Modify prompt to include strategy for generating recommendations\n                    strategyPrompt = \"Give me \".concat(recsPerStrategy, \" song recommendations for this prompt: \").concat(prompt, \". Use this strategy to make your recommendations \").concat(strategy, \". Format the response with this convention: Song Name - Artist Name 2. Song Name - Artist Name\");\n                    _context.next = 3;\n                    return generateSongRecommendations(strategyPrompt, recsPerStrategy);\n                  case 3:\n                    strategyRecommendations = _context.sent;\n                    // Log the strategy and its recommendations\n                    console.log(\"Strategy: \".concat(strategy), strategyRecommendations);\n                    return _context.abrupt(\"return\", strategyRecommendations);\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x2) {\n              return _ref3.apply(this, arguments);\n            };\n          }()); // Resolve all promises concurrently and flatten the resulting array\n          _context2.next = 8;\n          return Promise.all(strategyPromises);\n        case 8:\n          recommendations = _context2.sent.flat();\n          // Remove duplicates by converting to Set and back to array\n          recommendations = _toConsumableArray(new Set(recommendations));\n\n          // Randomize the order of recommendations\n          shuffleArray(recommendations);\n\n          // In case total recommendations are less than 25 due to rounding down, fill up remaining\n          if (!(recommendations.length < totalRecommendations)) {\n            _context2.next = 18;\n            break;\n          }\n          remainingRecs = totalRecommendations - recommendations.length;\n          _context2.next = 15;\n          return generateSongRecommendations(prompt, remainingRecs);\n        case 15:\n          additionalRecs = _context2.sent;\n          // Remove potential duplicates again after adding additional recommendations\n          recommendations = _toConsumableArray(new Set(recommendations.concat(additionalRecs)));\n\n          // Randomize the order of recommendations again after adding additional recommendations\n          shuffleArray(recommendations);\n        case 18:\n          console.log(\"Final recommendations: \", recommendations);\n          return _context2.abrupt(\"return\", recommendations);\n        case 20:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function generateTotalSongRecommendations(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n//Interprets prompt to determine which batch strategies make sense given the context of the prompt\nexport var DetermineAppropriateStrategies = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(prompt) {\n    var batchDescriptions, context, data, response, jsonResponse, responseContent, strategies, errorResponse;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          batchDescriptions = [\"1. Literal interpretation of the user's prompt\", \"2. Capturing the mood or theme implied by the user's prompt\", \"3. Selecting songs from different genres that would fit the context of the user's prompt\", \"4. Suggesting songs from different eras or time periods that align with the user's prompt\", \"5. Creative interpretation of the user's prompt\"];\n          context = \"The user is looking for song recommendations that are appropriate the following prompt: \".concat(prompt, \". \\n    Think about what exactly the user is asking for. Are they looking to capture a mood? Are they asking about a specific event or location?\\n    Based on this reflection, which of these strategies would be suitable for recommending music based on this prompt: \").concat(batchDescriptions, \"? \\n    List the suitable strategies in an array with the corresponding number for the batch description.\\n    For example, if the prompt is \\\"I'm feeling sad\\\", then the suitable strategies would be 1, 2, 3, and 5. And you would return [1, 2, 3, 5].\"); // run an api call to openai to generate the response\n          data = JSON.stringify({\n            model: \"gpt-4\",\n            messages: [{\n              role: \"system\",\n              content: \"You are a prompt interpreter. Based on a prompt you will categorize which music recommendation strategies to use.\"\n            }, {\n              role: \"user\",\n              content: context\n            }]\n          });\n          _context3.prev = 3;\n          _context3.next = 6;\n          return fetch(API_URL_CHAT_COMPLETIONS, {\n            method: \"POST\",\n            body: data,\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": \"Bearer \".concat(api_key)\n            }\n          });\n        case 6:\n          response = _context3.sent;\n          if (!response.ok) {\n            _context3.next = 18;\n            break;\n          }\n          _context3.next = 10;\n          return response.json();\n        case 10:\n          jsonResponse = _context3.sent;\n          responseContent = jsonResponse.choices[0].message.content;\n          console.log(responseContent);\n          // Extract numbers from GPT-4's response\n          strategies = responseContent.match(/\\d+/g);\n          if (!(strategies !== null)) {\n            _context3.next = 16;\n            break;\n          }\n          return _context3.abrupt(\"return\", strategies.map(Number));\n        case 16:\n          _context3.next = 22;\n          break;\n        case 18:\n          _context3.next = 20;\n          return response.json();\n        case 20:\n          errorResponse = _context3.sent;\n          console.log('Error response:', errorResponse);\n        case 22:\n          _context3.next = 27;\n          break;\n        case 24:\n          _context3.prev = 24;\n          _context3.t0 = _context3[\"catch\"](3);\n          console.log(_context3.t0);\n        case 27:\n          // Fall back to the wildcard strategy.\n          console.log(\"An error occurred or no strategies were selected. Falling back to wildcard strategy.\");\n          return _context3.abrupt(\"return\", [5]);\n        case 29:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[3, 24]]);\n  }));\n  return function DetermineAppropriateStrategies(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\n//Asynchronous functions\n_c = DetermineAppropriateStrategies;\nexport var generateSongRecommendations = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(prompt) {\n    var data, response, jsonResponse, responseArray, filteredResponse;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          data = JSON.stringify({\n            model: \"gpt-4\",\n            messages: [{\n              role: \"system\",\n              content: \"You are a music recommendation engine.\"\n            }, {\n              role: \"user\",\n              content: prompt\n            }]\n          });\n          _context4.prev = 1;\n          _context4.next = 4;\n          return fetch(API_URL_CHAT_COMPLETIONS, {\n            method: \"POST\",\n            body: data,\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": \"Bearer \".concat(api_key)\n            }\n          });\n        case 4:\n          response = _context4.sent;\n          if (!response.ok) {\n            _context4.next = 12;\n            break;\n          }\n          _context4.next = 8;\n          return response.json();\n        case 8:\n          jsonResponse = _context4.sent;\n          responseArray = jsonResponse.choices[0].message.content.split(/\\d+\\.\\s/g);\n          filteredResponse = responseArray.map(function (element) {\n            return element.replace(/\\n|\\d+\\./g, \"\").trim();\n          }).filter(function (element) {\n            return element !== \"\";\n          });\n          return _context4.abrupt(\"return\", filteredResponse);\n        case 12:\n          _context4.next = 17;\n          break;\n        case 14:\n          _context4.prev = 14;\n          _context4.t0 = _context4[\"catch\"](1);\n          console.log(_context4.t0);\n        case 17:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 14]]);\n  }));\n  return function generateSongRecommendations(_x4) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var generatePlaylistName = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(prompt) {\n    var data, response, jsonResponse, textResponse;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          data = JSON.stringify({\n            model: \"text-davinci-003\",\n            prompt: prompt,\n            temperature: 0.5,\n            max_tokens: 500,\n            top_p: 1,\n            frequency_penalty: 0,\n            presence_penalty: 0\n          });\n          _context5.prev = 1;\n          _context5.next = 4;\n          return fetch(API_URL_COMPLETIONS, {\n            method: \"POST\",\n            body: data,\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": \"Bearer \".concat(api_key)\n            }\n          });\n        case 4:\n          response = _context5.sent;\n          if (!response.ok) {\n            _context5.next = 11;\n            break;\n          }\n          _context5.next = 8;\n          return response.json();\n        case 8:\n          jsonResponse = _context5.sent;\n          textResponse = jsonResponse.choices[0].text;\n          return _context5.abrupt(\"return\", textResponse);\n        case 11:\n          _context5.next = 16;\n          break;\n        case 13:\n          _context5.prev = 13;\n          _context5.t0 = _context5[\"catch\"](1);\n          console.log(_context5.t0);\n        case 16:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[1, 13]]);\n  }));\n  return function generatePlaylistName(_x5) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var generateImage = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(prompt) {\n    var data, response, jsonResponse;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          data = JSON.stringify({\n            \"model\": \"image-alpha-001\",\n            \"prompt\": prompt,\n            \"num_images\": 1,\n            \"size\": \"512x512\"\n          });\n          _context6.prev = 1;\n          _context6.next = 4;\n          return fetch(API_URL_IMAGE, {\n            method: \"POST\",\n            body: data,\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": \"Bearer \".concat(api_key)\n            }\n          });\n        case 4:\n          response = _context6.sent;\n          if (!response.ok) {\n            _context6.next = 17;\n            break;\n          }\n          _context6.next = 8;\n          return response.json();\n        case 8:\n          jsonResponse = _context6.sent;\n          if (!(jsonResponse && jsonResponse.data && jsonResponse.data.length > 0)) {\n            _context6.next = 13;\n            break;\n          }\n          return _context6.abrupt(\"return\", jsonResponse.data[0].url);\n        case 13:\n          console.error(\"Invalid response from OpenAI API\");\n          return _context6.abrupt(\"return\", null);\n        case 15:\n          _context6.next = 19;\n          break;\n        case 17:\n          console.error(\"Failed to generate image: \".concat(response.status));\n          return _context6.abrupt(\"return\", null);\n        case 19:\n          _context6.next = 25;\n          break;\n        case 21:\n          _context6.prev = 21;\n          _context6.t0 = _context6[\"catch\"](1);\n          console.error(\"Error generating image: \".concat(_context6.t0));\n          return _context6.abrupt(\"return\", null);\n        case 25:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[1, 21]]);\n  }));\n  return function generateImage(_x6) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport default {\n  generateSongRecommendations: generateSongRecommendations,\n  generatePlaylistName: generatePlaylistName,\n  generateImage: generateImage,\n  generateTotalSongRecommendations: generateTotalSongRecommendations\n};\nvar _c;\n$RefreshReg$(_c, \"DetermineAppropriateStrategies\");","map":{"version":3,"names":["API_URL_COMPLETIONS","API_URL_CHAT_COMPLETIONS","api_key","process","env","REACT_APP_MY_OPENAI_API_KEY","API_URL_IMAGE","shuffleArray","array","i","length","j","Math","floor","random","_ref","generateTotalSongRecommendations","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","prompt","strategies","totalRecommendations","recsPerStrategy","strategyPromises","recommendations","remainingRecs","additionalRecs","wrap","_callee2$","_context2","prev","next","DetermineAppropriateStrategies","sent","map","_ref3","_callee","strategy","strategyPrompt","strategyRecommendations","_callee$","_context","concat","generateSongRecommendations","console","log","abrupt","stop","_x2","apply","arguments","Promise","all","flat","_toConsumableArray","Set","_x","_ref4","_callee3","batchDescriptions","context","data","response","jsonResponse","responseContent","errorResponse","_callee3$","_context3","JSON","stringify","model","messages","role","content","fetch","method","body","headers","ok","json","choices","message","match","Number","t0","_x3","_c","_ref5","_callee4","responseArray","filteredResponse","_callee4$","_context4","split","element","replace","trim","filter","_x4","generatePlaylistName","_ref6","_callee5","textResponse","_callee5$","_context5","temperature","max_tokens","top_p","frequency_penalty","presence_penalty","text","_x5","generateImage","_ref7","_callee6","_callee6$","_context6","url","error","status","_x6","$RefreshReg$"],"sources":["C:/Users/joesh/IdeaProjects/soundtracks_final/src/util/OpenAiAPIRequest.js"],"sourcesContent":["// Information to reach API\r\nconst API_URL_COMPLETIONS = \"https://api.openai.com/v1/completions\";\r\nconst API_URL_CHAT_COMPLETIONS = \"https://api.openai.com/v1/chat/completions\";\r\nconst api_key = process.env.REACT_APP_MY_OPENAI_API_KEY;//API key that Joe got from registering the app\r\nconst API_URL_IMAGE = \"https://api.openai.com/v1/images/generations\";\r\n\r\n\r\n// Fisher-Yates shuffle algorithm\r\nconst shuffleArray = (array) => {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n    }\r\n}\r\n\r\n\r\n// creates song recommendations based on a prompt\r\nexport const generateTotalSongRecommendations = async (prompt) => {\r\n    // Determine strategies\r\n    const strategies = await DetermineAppropriateStrategies(prompt);\r\n\r\n    // Total recommendations required\r\n    const totalRecommendations = 25;\r\n    // Calculate recommendations per strategy\r\n    const recsPerStrategy = Math.floor(totalRecommendations / strategies.length);\r\n\r\n    // Create array of promises for all strategies\r\n    const strategyPromises = strategies.map(async strategy => {\r\n        // Modify prompt to include strategy for generating recommendations\r\n        const strategyPrompt = `Give me ${recsPerStrategy} song recommendations for this prompt: ${prompt}. Use this strategy to make your recommendations ${strategy}. Format the response with this convention: Song Name - Artist Name 2. Song Name - Artist Name`;\r\n        const strategyRecommendations = await generateSongRecommendations(strategyPrompt, recsPerStrategy);\r\n\r\n        // Log the strategy and its recommendations\r\n        console.log(`Strategy: ${strategy}`, strategyRecommendations);\r\n\r\n        return strategyRecommendations;\r\n    });\r\n\r\n    // Resolve all promises concurrently and flatten the resulting array\r\n    let recommendations = (await Promise.all(strategyPromises)).flat();\r\n\r\n    // Remove duplicates by converting to Set and back to array\r\n    recommendations = [...new Set(recommendations)];\r\n\r\n    // Randomize the order of recommendations\r\n    shuffleArray(recommendations);\r\n\r\n    // In case total recommendations are less than 25 due to rounding down, fill up remaining\r\n    if (recommendations.length < totalRecommendations) {\r\n        const remainingRecs = totalRecommendations - recommendations.length;\r\n        const additionalRecs = await generateSongRecommendations(prompt, remainingRecs);\r\n\r\n        // Remove potential duplicates again after adding additional recommendations\r\n        recommendations = [...new Set(recommendations.concat(additionalRecs))];\r\n\r\n        // Randomize the order of recommendations again after adding additional recommendations\r\n        shuffleArray(recommendations);\r\n    }\r\n    console.log(\"Final recommendations: \", recommendations);\r\n\r\n    return recommendations;\r\n}\r\n\r\n\r\n//Interprets prompt to determine which batch strategies make sense given the context of the prompt\r\nexport const DetermineAppropriateStrategies = async (prompt) => {\r\n    const batchDescriptions = [\r\n        \"1. Literal interpretation of the user's prompt\",\r\n        \"2. Capturing the mood or theme implied by the user's prompt\",\r\n        \"3. Selecting songs from different genres that would fit the context of the user's prompt\",\r\n        \"4. Suggesting songs from different eras or time periods that align with the user's prompt\",\r\n        \"5. Creative interpretation of the user's prompt\",\r\n    ];\r\n    const context =\r\n    `The user is looking for song recommendations that are appropriate the following prompt: ${prompt}. \r\n    Think about what exactly the user is asking for. Are they looking to capture a mood? Are they asking about a specific event or location?\r\n    Based on this reflection, which of these strategies would be suitable for recommending music based on this prompt: ${batchDescriptions}? \r\n    List the suitable strategies in an array with the corresponding number for the batch description.\r\n    For example, if the prompt is \"I'm feeling sad\", then the suitable strategies would be 1, 2, 3, and 5. And you would return [1, 2, 3, 5].`;\r\n    // run an api call to openai to generate the response\r\n    const data = JSON.stringify({\r\n        model: \"gpt-4\",\r\n        messages: [{\r\n            role: \"system\",\r\n            content: \"You are a prompt interpreter. Based on a prompt you will categorize which music recommendation strategies to use.\"\r\n        }, {\r\n            role: \"user\",\r\n            content: context\r\n        }],\r\n    });\r\n    try {\r\n        const response = await fetch(API_URL_CHAT_COMPLETIONS, {\r\n            method: \"POST\",\r\n            body: data,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${api_key}`\r\n            }\r\n        });\r\n        if (response.ok) {\r\n            const jsonResponse = await response.json();\r\n            const responseContent = jsonResponse.choices[0].message.content;\r\n            console.log(responseContent)\r\n            // Extract numbers from GPT-4's response\r\n            const strategies = responseContent.match(/\\d+/g);\r\n            if (strategies !== null) {\r\n                return strategies.map(Number);\r\n            }\r\n        }\r\n        else {\r\n        const errorResponse = await response.json();\r\n        console.log('Error response:', errorResponse);\r\n    }\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n    // Fall back to the wildcard strategy.\r\n    console.log(\"An error occurred or no strategies were selected. Falling back to wildcard strategy.\");\r\n    return [5];\r\n}\r\n\r\n\r\n//Asynchronous functions\r\nexport const generateSongRecommendations = async (prompt) => {\r\n    const data = JSON.stringify({\r\n        model: \"gpt-4\",\r\n        messages: [{\r\n            role: \"system\",\r\n            content: \"You are a music recommendation engine.\"\r\n        }, {\r\n            role: \"user\",\r\n            content: prompt\r\n        }],\r\n    });\r\n\r\n    try {\r\n        const response = await fetch(API_URL_CHAT_COMPLETIONS, {\r\n            method: \"POST\",\r\n            body: data,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${api_key}`\r\n            }\r\n        });\r\n\r\n        if (response.ok) {\r\n            const jsonResponse = await response.json();\r\n            const responseArray = jsonResponse.choices[0].message.content.split(/\\d+\\.\\s/g);\r\n            const filteredResponse = responseArray.map((element) => {\r\n                return element.replace(/\\n|\\d+\\./g, \"\").trim();\r\n            }).filter((element) => element !== \"\");\r\n            return (filteredResponse);\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport const generatePlaylistName = async(prompt) => {\r\n    const data = JSON.stringify({\r\n        model: \"text-davinci-003\",\r\n        prompt: prompt,\r\n        temperature: 0.5,\r\n        max_tokens: 500,\r\n        top_p: 1,\r\n        frequency_penalty: 0,\r\n        presence_penalty: 0\r\n    });\r\n\r\n    try {\r\n        const response = await fetch(API_URL_COMPLETIONS, {\r\n            method: \"POST\",\r\n            body: data,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${api_key}`\r\n            }\r\n        });\r\n        if(response.ok){\r\n            const jsonResponse = await response.json();\r\n            const textResponse = jsonResponse.choices[0].text\r\n            return(textResponse);\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const generateImage = async (prompt) => {\r\n    const data = JSON.stringify({\r\n        \"model\": \"image-alpha-001\",\r\n        \"prompt\": prompt,\r\n        \"num_images\": 1,\r\n        \"size\": \"512x512\",\r\n    });\r\n\r\n    try {\r\n        const response = await fetch(API_URL_IMAGE, {\r\n            method: \"POST\",\r\n            body: data,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": `Bearer ${api_key}`\r\n            }\r\n        });\r\n        if (response.ok) {\r\n            const jsonResponse = await response.json();\r\n            if (jsonResponse && jsonResponse.data && jsonResponse.data.length > 0) {\r\n                return jsonResponse.data[0].url;\r\n            } else {\r\n                console.error(\"Invalid response from OpenAI API\");\r\n                return null;\r\n            }\r\n        } else {\r\n            console.error(`Failed to generate image: ${response.status}`);\r\n            return null;\r\n        }\r\n    } catch (error) {\r\n        console.error(`Error generating image: ${error}`);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport default {generateSongRecommendations, generatePlaylistName, generateImage, generateTotalSongRecommendations};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}